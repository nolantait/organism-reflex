{"version":3,"file":"ui-reflex.esm.js","sources":["../node_modules/stimulus-use/dist/support/index.js","../node_modules/stimulus-use/dist/use-click-outside/use-click-outside.js","../node_modules/stimulus-use/dist/stimulus_use.js","../node_modules/stimulus-use/dist/use-hover/use-hover.js","../src/dropdown.mjs"],"sourcesContent":["export const method = (controller, methodName) => {\n    const method = controller[methodName];\n    if (typeof method == 'function') {\n        return method;\n    }\n    else {\n        return (...args) => { };\n    }\n};\nexport const composeEventName = (name, controller, eventPrefix) => {\n    let composedName = name;\n    if (eventPrefix === true) {\n        composedName = `${controller.identifier}:${name}`;\n    }\n    else if (typeof eventPrefix === 'string') {\n        composedName = `${eventPrefix}:${name}`;\n    }\n    return composedName;\n};\nexport const extendedEvent = (type, event, detail) => {\n    const { bubbles, cancelable, composed } = event || { bubbles: true, cancelable: true, composed: true };\n    if (event) {\n        Object.assign(detail, { originalEvent: event });\n    }\n    const customEvent = new CustomEvent(type, {\n        bubbles,\n        cancelable,\n        composed,\n        detail,\n    });\n    return customEvent;\n};\nexport function isElementInViewport(el) {\n    const rect = el.getBoundingClientRect();\n    const windowHeight = (window.innerHeight || document.documentElement.clientHeight);\n    const windowWidth = (window.innerWidth || document.documentElement.clientWidth);\n    const vertInView = (rect.top <= windowHeight) && ((rect.top + rect.height) >= 0);\n    const horInView = (rect.left <= windowWidth) && ((rect.left + rect.width) >= 0);\n    return (vertInView && horInView);\n}\n//# sourceMappingURL=index.js.map","import { composeEventName, extendedEvent, isElementInViewport } from '../support/index';\nconst defaultOptions = {\n    events: ['click', 'touchend'],\n    onlyVisible: true,\n    dispatchEvent: true,\n    eventPrefix: true,\n};\nexport const useClickOutside = (controller, options = {}) => {\n    const { onlyVisible, dispatchEvent, events, eventPrefix } = Object.assign({}, defaultOptions, options);\n    const onEvent = (event) => {\n        const targetElement = (options === null || options === void 0 ? void 0 : options.element) || controller.element;\n        if (targetElement.contains(event.target) || (!isElementInViewport(targetElement) && onlyVisible)) {\n            return;\n        }\n        // call the clickOutside method of the Stimulus controller\n        if (controller.clickOutside) {\n            controller.clickOutside(event);\n        }\n        // emit a custom event\n        if (dispatchEvent) {\n            const eventName = composeEventName('click:outside', controller, eventPrefix);\n            const clickOutsideEvent = extendedEvent(eventName, event, { controller });\n            targetElement.dispatchEvent(clickOutsideEvent);\n        }\n    };\n    const observe = () => {\n        events === null || events === void 0 ? void 0 : events.forEach(event => {\n            window.addEventListener(event, onEvent, false);\n        });\n    };\n    const unobserve = () => {\n        events === null || events === void 0 ? void 0 : events.forEach(event => {\n            window.removeEventListener(event, onEvent, false);\n        });\n    };\n    // keep a copy of the current disconnect() function of the controller\n    // to support composing several behaviors\n    const controllerDisconnect = controller.disconnect.bind(controller);\n    Object.assign(controller, {\n        disconnect() {\n            unobserve();\n            controllerDisconnect();\n        },\n    });\n    observe();\n    return [observe, unobserve];\n};\n//# sourceMappingURL=use-click-outside.js.map","const defaultOptions = {\n    debug: false,\n    logger: console\n};\nexport class StimulusUse {\n    constructor(controller, options = {}) {\n        var _a, _b, _c;\n        this.log = (functionName, args) => {\n            if (!this.debug)\n                return;\n            this.logger.groupCollapsed(`%c${this.controller.identifier} %c#${functionName}`, 'color: #3B82F6', 'color: unset');\n            this.logger.log(Object.assign({ controllerId: this.controllerId }, args));\n            this.logger.groupEnd();\n        };\n        this.debug = (_b = (_a = options === null || options === void 0 ? void 0 : options.debug) !== null && _a !== void 0 ? _a : controller.application.stimulusUseDebug) !== null && _b !== void 0 ? _b : defaultOptions.debug;\n        this.logger = (_c = options === null || options === void 0 ? void 0 : options.logger) !== null && _c !== void 0 ? _c : defaultOptions.logger;\n        this.controller = controller;\n        this.controllerId = controller.element.id || controller.element.dataset.id;\n        // make copies of lifecycle functions\n        this.controllerInitialize = controller.initialize.bind(controller);\n        this.controllerConnect = controller.connect.bind(controller);\n        this.controllerDisconnect = controller.disconnect.bind(controller);\n    }\n}\n//# sourceMappingURL=stimulus_use.js.map","import { StimulusUse } from '../stimulus_use';\nimport { method } from '../support/index';\nexport class UseHover extends StimulusUse {\n    constructor(controller, options = {}) {\n        super(controller, options);\n        this.observe = () => {\n            this.targetElement.addEventListener('mouseenter', this.onEnter);\n            this.targetElement.addEventListener('mouseleave', this.onLeave);\n        };\n        this.unobserve = () => {\n            this.targetElement.removeEventListener('mouseenter', this.onEnter);\n            this.targetElement.removeEventListener('mouseleave', this.onLeave);\n        };\n        this.onEnter = () => {\n            method(this.controller, 'mouseEnter').call(this.controller);\n            this.log('mouseEnter', { hover: true });\n        };\n        this.onLeave = () => {\n            method(this.controller, 'mouseLeave').call(this.controller);\n            this.log('mouseLeave', { hover: false });\n        };\n        this.targetElement = (options === null || options === void 0 ? void 0 : options.element) || controller.element;\n        this.controller = controller;\n        this.enhanceController();\n        this.observe();\n    }\n    enhanceController() {\n        const controllerDisconnect = this.controller.disconnect.bind(this.controller);\n        const disconnect = () => {\n            this.unobserve();\n            controllerDisconnect();\n        };\n        Object.assign(this.controller, { disconnect });\n    }\n}\nexport const useHover = (controller, options = {}) => {\n    const observer = new UseHover(controller, options);\n    return [observer.observe, observer.unobserve];\n};\n//# sourceMappingURL=use-hover.js.map","import { Controller } from \"stimulus\"\nimport { useHover, useClickOutside } from 'stimulus-use'\n\nexport default class extends Controller {\n  static classes = [ \"hidden\" ]\n  static targets = [ \"expandable\" ]\n  static values = {\n    expanded: Boolean,\n    mode: String\n  }\n\n  connect() {\n    useClickOutside(this)\n\n    switch(this.modeValue) {\n      case 'click':\n        break\n      case 'hover':\n        useHover(this)\n        break\n      default:\n        break\n    }\n  }\n\n  toggle(event) {\n    event.preventDefault()\n    event.stopImmediatePropagation()\n\n    this.expandedValue = !this.expandedValue\n  }\n\n  expandedValueChanged() {\n    this.expandedValue ?\n      this._expand() :\n      this._collapse()\n  }\n\n  clickOutside(event) {\n    event.preventDefault()\n    this.expandedValue = false\n  }\n\n  mouseEnter() {\n    this.expandedValue = true\n  }\n\n  mouseLeave() {\n    this.expandedValue = false\n  }\n\n  _expand() {\n    this.element.setAttribute(\"aria-expanded\", \"true\")\n    this.expandableTarget.classList.remove(this.hiddenClass)\n  }\n\n  _collapse() {\n    this.element.setAttribute(\"aria-expanded\", \"false\")\n    this.expandableTarget.classList.add(this.hiddenClass)\n  }\n}\n"],"names":["method","controller","methodName","args","defaultOptions","events","onlyVisible","dispatchEvent","eventPrefix","useClickOutside","options","Object","assign","onEvent","event","targetElement","element","contains","target","el","rect","getBoundingClientRect","windowHeight","window","innerHeight","document","documentElement","clientHeight","windowWidth","innerWidth","clientWidth","top","height","left","width","isElementInViewport","clickOutside","clickOutsideEvent","type","detail","bubbles","cancelable","composed","originalEvent","CustomEvent","extendedEvent","name","composedName","identifier","composeEventName","observe","forEach","addEventListener","unobserve","removeEventListener","controllerDisconnect","disconnect","bind","[object Object]","debug","logger","console","StimulusUse","_a","_b","_c","this","log","functionName","groupCollapsed","controllerId","groupEnd","application","stimulusUseDebug","id","dataset","controllerInitialize","initialize","controllerConnect","connect","UseHover","super","onEnter","onLeave","call","hover","enhanceController","modeValue","observer","useHover","toggle","preventDefault","stopImmediatePropagation","expandedValue","expandedValueChanged","_expand","_collapse","mouseEnter","mouseLeave","setAttribute","expandableTarget","classList","remove","hiddenClass","add","Controller","classes","targets","values","expanded","Boolean","mode","String"],"mappings":"0BAAO,MAAMA,EAAS,CAACC,EAAYC,KAC/B,MAAMF,EAASC,EAAWC,GAC1B,MAAqB,mBAAVF,EACAA,EAGA,IAAIG,cCLbC,EAAiB,CACnBC,OAAQ,CAAC,QAAS,YAClBC,aAAa,EACbC,eAAe,EACfC,aAAa,GAEJC,EAAkB,CAACR,EAAYS,EAAU,MAClD,MAAMJ,YAAEA,EAAWC,cAAEA,EAAaF,OAAEA,EAAMG,YAAEA,GAAgBG,OAAOC,OAAO,GAAIR,EAAgBM,GACxFG,EAAWC,IACb,MAAMC,GAAiBL,MAAAA,OAAyC,EAASA,EAAQM,UAAYf,EAAWe,QACxG,KAAID,EAAcE,SAASH,EAAMI,UDqBlC,SAA6BC,GAChC,MAAMC,EAAOD,EAAGE,wBACVC,EAAgBC,OAAOC,aAAeC,SAASC,gBAAgBC,aAC/DC,EAAeL,OAAOM,YAAcJ,SAASC,gBAAgBI,YAGnE,OAFoBV,EAAKW,KAAOT,GAAmBF,EAAKW,IAAMX,EAAKY,QAAW,GAC3DZ,EAAKa,MAAQL,GAAkBR,EAAKa,KAAOb,EAAKc,OAAU,EC1B3BC,CAAoBpB,IAAkBT,KAIhFL,EAAWmC,cACXnC,EAAWmC,aAAatB,GAGxBP,GAAe,CACf,MACM8B,EDFW,EAACC,EAAMxB,EAAOyB,KACvC,MAAMC,QAAEA,EAAOC,WAAEA,EAAUC,SAAEA,GAAa5B,GAAS,CAAE0B,SAAS,EAAMC,YAAY,EAAMC,UAAU,GAUhG,OATI5B,GACAH,OAAOC,OAAO2B,EAAQ,CAAEI,cAAe7B,IAEvB,IAAI8B,YAAYN,EAAM,CACtCE,QAAAA,EACAC,WAAAA,EACAC,SAAAA,EACAH,OAAAA,KCP8BM,CDZN,EAACC,EAAM7C,EAAYO,KAC/C,IAAIuC,EAAeD,EAOnB,OANoB,IAAhBtC,EACAuC,KAAkB9C,EAAW+C,cAAcF,IAEf,iBAAhBtC,IACZuC,KAAkBvC,KAAesC,KAE9BC,GCGmBE,CAAiB,gBAAiBhD,EAAYO,GACbM,EAAO,CAAEb,WAAAA,IAC5Dc,EAAcR,cAAc8B,KAG9Ba,EAAU,KACZ7C,MAAAA,GAAgDA,EAAO8C,QAAQrC,IAC3DS,OAAO6B,iBAAiBtC,EAAOD,GAAS,MAG1CwC,EAAY,KACdhD,MAAAA,GAAgDA,EAAO8C,QAAQrC,IAC3DS,OAAO+B,oBAAoBxC,EAAOD,GAAS,MAK7C0C,EAAuBtD,EAAWuD,WAAWC,KAAKxD,GAQxD,OAPAU,OAAOC,OAAOX,EAAY,CACtByD,aACIL,IACAE,OAGRL,IACO,CAACA,EAASG,IC7CfjD,EAAiB,CACnBuD,OAAO,EACPC,OAAQC,SAEZ,MAAaC,EACTJ,YAAYzD,EAAYS,EAAU,IAC9B,IAAIqD,EAAIC,EAAIC,EACZC,KAAKC,IAAM,EAACC,EAAcjE,KACjB+D,KAAKP,QAEVO,KAAKN,OAAOS,oBAAoBH,KAAKjE,WAAW+C,iBAAiBoB,IAAgB,iBAAkB,gBACnGF,KAAKN,OAAOO,IAAIxD,OAAOC,OAAO,CAAE0D,aAAcJ,KAAKI,cAAgBnE,IACnE+D,KAAKN,OAAOW,cAEhBL,KAAKP,MAAmK,QAA1JK,EAAgF,QAA1ED,EAAKrD,MAAAA,OAAyC,EAASA,EAAQiD,aAA0B,IAAPI,EAAgBA,EAAK9D,EAAWuE,YAAYC,wBAAqC,IAAPT,EAAgBA,EAAK5D,EAAeuD,MACpNO,KAAKN,OAAqF,QAA3EK,EAAKvD,MAAAA,OAAyC,EAASA,EAAQkD,cAA2B,IAAPK,EAAgBA,EAAK7D,EAAewD,OACtIM,KAAKjE,WAAaA,EAClBiE,KAAKI,aAAerE,EAAWe,QAAQ0D,IAAMzE,EAAWe,QAAQ2D,QAAQD,GAExER,KAAKU,qBAAuB3E,EAAW4E,WAAWpB,KAAKxD,GACvDiE,KAAKY,kBAAoB7E,EAAW8E,QAAQtB,KAAKxD,GACjDiE,KAAKX,qBAAuBtD,EAAWuD,WAAWC,KAAKxD,ICnBxD,MAAM+E,UAAiBlB,EAC1BJ,YAAYzD,EAAYS,EAAU,IAC9BuE,MAAMhF,EAAYS,GAClBwD,KAAKhB,QAAU,MACXgB,KAAKnD,cAAcqC,iBAAiB,aAAcc,KAAKgB,SACvDhB,KAAKnD,cAAcqC,iBAAiB,aAAcc,KAAKiB,WAE3DjB,KAAKb,UAAY,MACba,KAAKnD,cAAcuC,oBAAoB,aAAcY,KAAKgB,SAC1DhB,KAAKnD,cAAcuC,oBAAoB,aAAcY,KAAKiB,WAE9DjB,KAAKgB,QAAU,MACXlF,EAAOkE,KAAKjE,WAAY,cAAcmF,KAAKlB,KAAKjE,YAChDiE,KAAKC,IAAI,aAAc,CAAEkB,OAAO,MAEpCnB,KAAKiB,QAAU,MACXnF,EAAOkE,KAAKjE,WAAY,cAAcmF,KAAKlB,KAAKjE,YAChDiE,KAAKC,IAAI,aAAc,CAAEkB,OAAO,MAEpCnB,KAAKnD,eAAiBL,MAAAA,OAAyC,EAASA,EAAQM,UAAYf,EAAWe,QACvGkD,KAAKjE,WAAaA,EAClBiE,KAAKoB,oBACLpB,KAAKhB,UAETQ,oBACI,MAAMH,EAAuBW,KAAKjE,WAAWuD,WAAWC,KAAKS,KAAKjE,YAKlEU,OAAOC,OAAOsD,KAAKjE,WAAY,CAAEuD,WAJd,KACfU,KAAKb,YACLE,QC3BG,uJAQbwB,0BACEtE,EAAgByD,MAETA,KAAKqB,eACL,kBAEA,QDkBa,EAACtF,EAAYS,EAAU,MAC3C,MAAM8E,EAAW,IAAIR,EAAS/E,EAAYS,IClBtC+E,CAASvB,oBAOfwB,gBAAO5E,GACLA,EAAM6E,iBACN7E,EAAM8E,gCAEDC,eAAiB3B,KAAK2B,2BAG7BC,qCACOD,cACH3B,KAAK6B,UACL7B,KAAK8B,yBAGT5D,sBAAatB,GACXA,EAAM6E,sBACDE,eAAgB,eAGvBI,2BACOJ,eAAgB,eAGvBK,2BACOL,eAAgB,eAGvBE,wBACO/E,QAAQmF,aAAa,gBAAiB,aACtCC,iBAAiBC,UAAUC,OAAOpC,KAAKqC,0BAG9CP,0BACOhF,QAAQmF,aAAa,gBAAiB,cACtCC,iBAAiBC,UAAUG,IAAItC,KAAKqC,iBAvDhBE,gBACpBC,QAAU,CAAE,YACZC,QAAU,CAAE,gBACZC,OAAS,CACdC,SAAUC,QACVC,KAAMC"}