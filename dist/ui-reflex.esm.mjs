import{Controller as e}from"stimulus";const t=(e,t)=>{const n=e[t];return"function"==typeof n?n:(...e)=>{}};const n={events:["click","touchend"],onlyVisible:!0,dispatchEvent:!0,eventPrefix:!0},o=(e,t={})=>{const{onlyVisible:o,dispatchEvent:i,events:s,eventPrefix:l}=Object.assign({},n,t),r=n=>{const s=(null==t?void 0:t.element)||e.element;if(!(s.contains(n.target)||!function(e){const t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth;return t.top<=n&&t.top+t.height>=0&&t.left<=o&&t.left+t.width>=0}(s)&&o)&&(e.clickOutside&&e.clickOutside(n),i)){const t=((e,t,n)=>{const{bubbles:o,cancelable:i,composed:s}=t||{bubbles:!0,cancelable:!0,composed:!0};return t&&Object.assign(n,{originalEvent:t}),new CustomEvent(e,{bubbles:o,cancelable:i,composed:s,detail:n})})(((e,t,n)=>{let o=e;return!0===n?o=`${t.identifier}:${e}`:"string"==typeof n&&(o=`${n}:${e}`),o})("click:outside",e,l),n,{controller:e});s.dispatchEvent(t)}},c=()=>{null==s||s.forEach(e=>{window.addEventListener(e,r,!1)})},a=()=>{null==s||s.forEach(e=>{window.removeEventListener(e,r,!1)})},d=e.disconnect.bind(e);return Object.assign(e,{disconnect(){a(),d()}}),c(),[c,a]},i={debug:!1,logger:console};class s{constructor(e,t={}){var n,o,s;this.log=((e,t)=>{this.debug&&(this.logger.groupCollapsed(`%c${this.controller.identifier} %c#${e}`,"color: #3B82F6","color: unset"),this.logger.log(Object.assign({controllerId:this.controllerId},t)),this.logger.groupEnd())}),this.debug=null!==(o=null!==(n=null==t?void 0:t.debug)&&void 0!==n?n:e.application.stimulusUseDebug)&&void 0!==o?o:i.debug,this.logger=null!==(s=null==t?void 0:t.logger)&&void 0!==s?s:i.logger,this.controller=e,this.controllerId=e.element.id||e.element.dataset.id,this.controllerInitialize=e.initialize.bind(e),this.controllerConnect=e.connect.bind(e),this.controllerDisconnect=e.disconnect.bind(e)}}class l extends s{constructor(e,n={}){super(e,n),this.observe=(()=>{this.targetElement.addEventListener("mouseenter",this.onEnter),this.targetElement.addEventListener("mouseleave",this.onLeave)}),this.unobserve=(()=>{this.targetElement.removeEventListener("mouseenter",this.onEnter),this.targetElement.removeEventListener("mouseleave",this.onLeave)}),this.onEnter=(()=>{t(this.controller,"mouseEnter").call(this.controller),this.log("mouseEnter",{hover:!0})}),this.onLeave=(()=>{t(this.controller,"mouseLeave").call(this.controller),this.log("mouseLeave",{hover:!1})}),this.targetElement=(null==n?void 0:n.element)||e.element,this.controller=e,this.enhanceController(),this.observe()}enhanceController(){const e=this.controller.disconnect.bind(this.controller);Object.assign(this.controller,{disconnect:()=>{this.unobserve(),e()}})}}var r=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.connect=function(){switch(o(this),this.modeValue){case"click":break;case"hover":((e,t={})=>{const n=new l(e,t)})(this)}},t.prototype.toggle=function(e){e.preventDefault(),e.stopImmediatePropagation(),this.expandedValue=!this.expandedValue},t.prototype.expandedValueChanged=function(){this.expandedValue?this._expand():this._collapse()},t.prototype.clickOutside=function(e){e.preventDefault(),this.expandedValue=!1},t.prototype.mouseEnter=function(){this.expandedValue=!0},t.prototype.mouseLeave=function(){this.expandedValue=!1},t.prototype._expand=function(){this.element.setAttribute("aria-expanded","true"),this.expandableTarget.classList.remove(this.hiddenClass)},t.prototype._collapse=function(){this.element.setAttribute("aria-expanded","false"),this.expandableTarget.classList.add(this.hiddenClass)},t}(e);r.classes=["hidden"],r.targets=["expandable"],r.values={expanded:Boolean,mode:String};export{r as Dropdown};
//# sourceMappingURL=ui-reflex.esm.mjs.map
